<!DOCTYPE html>
<html>
    <head>
        <title>Building dependency graph</title>
        <script src="js/sigma.min.js" type="text/javascript"></script>
        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    </head>
    <body>
<input type="file" id="files" name="files[]" multiple />
<output >
    <ul id="list">
    </ul>
</output>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var li = document.createElement('li');
          $(li).text(e.target.result);
          $("#list").before(li);
          var xmlDoc = $.parseXML(e.target.result);
          console.log(xmlDoc);
          var xml = $("classpathentry", xmlDoc);
          // all modules
          var paths = []
          $.each(xml, function(i, el) { 
              if(el.getAttribute("kind") === "var") 
                paths.push(el.getAttribute("path"))
              });
          // our modules
          var fpaths = paths.filter(function(el) { 
              var pos = el.indexOf("kf/atg/module") !== -1 })
          console.log(fpaths);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsText(f);
    }
  }

function getFilteredPaths(paths) {
    return paths.filter(function(el) { return el.contains("kf/atg/module") })
    
}

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script>
    </body>
</html>

